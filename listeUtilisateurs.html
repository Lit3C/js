<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>UserList</title>
<!--_________________________________     http://jsbin.com/nidenayewo/edit?html,js,console,output     _________________________-->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
<!--________________________ GITHUB PREVIEW http://htmlpreview.github.io/?https://github.com/simplon-linap/js/blob/master/listeUtilisateurs.html -->
<!--________________________ GOOGLE DRIVE https://cd09d5c7fda82afb4018c24c967365dd18001886-www.googledrive.com/host/0B3BC9WJRQnAuYmtoMml6Sndqd0E -->

  <style>
    *{
      margin:0;
      padding:0;
      border-radius: 5px;
}
    html{margin:0;padding:0;}
    form {
      border : 1px solid lightgrey;
      width : 100px;
    }
    legend {
      background-color:#EEE;
      width:100%;
    }
    div{
      margin: 20px;
    }
    #add{
      background-color: #2B74B1;
      border: 2px solid #2B74B1;
      padding: 10px;
      color: #FFF;
    }
    .delete {
      background-color: #EE9D0D;
      padding: 0px 5px;
      border-radius: 3px;
      color:#FFF;
    }
    .col-md-3{
      margin:30px;
      padding:0px;
}
  </style>
</head>
<body>

  <form class="col-md-3">
    <legend>Liste Utilisateur</legend>
    <div>
    <label for="chpNom" >Nom</label>
      <input id="champNom" />
    </div>
    <div>
    <label for="chpPrenom" >Prenom</label>
      <input id="champPrenom" />
    </div>
    <button id="add" type="button" onclick="add()">Ajouter</button>
  </form>
    <ul id="userList" class="col-md-3">
      <li class="toSupp">Jean Dupond <button class="delete" type="button" onclick="supp(0)">x</button></li>
    </ul>
    <script>
      var users = [
        {
          nom:'Dupont',
          prenom:'Jean'
        }
      ];
      var maListe = document.getElementById("userList");

      /*function newButton(){
      var createButton = document.createElement("button");
        createButton.setAttribute("type","button");
        createButton.setAttribute("onclick","supp()");                  // numéro supp() à définir pour qu'il change
        createButton.textContent = "x";
      }*/

      var i = 0;

      var liSupp = document.getElementsByClassName("toSupp");
      function supp(position){
        var objetRetire = users.splice(position,1);
        console.log("position: "+position,
                    "objet retiré: "+objetRetire,
                    "contenu à supp: "+liSupp[position].textContent,
                   "Contenu de mon tableau d'objet users: ",
                    users);
        maListe.removeChild(liSupp[position]);

      }

      function add(){
        i++;
        console.log(i);
                //-----------------
        var addName = document.createElement("li");                     //Je crée une li sur click
            addName.setAttribute("class","toSupp");                        // Je lui définis une class="toSupp"
        /*
        addNamne.class="cequejeveux";


        */var recupNom = document.getElementById("champNom");       // Je récupère la saisie Nom
        var recupPrenom = document.getElementById("champPrenom"); //Je récupère la saisie Prénom
        //-----------------
        addName.textContent = recupNom.value +" "+ recupPrenom.value;         // Je définis dans ma liste le nom et prénom saisis
        var objetSaisie = {nom:recupNom.value,prenom:recupPrenom.value};  // Je définis ma var objet avec le nom et prenom saisis
        users.push(objetSaisie);                               // Je rajoute mon objet dans mon tableau d'objet users
        //-----------------
        var createButton = document.createElement("button");
        createButton.setAttribute("type","button");
        createButton.class="delete";
        createButton.setAttribute("onclick","supp("+users.indexOf(objetSaisie)+")");
        createButton.textContent = "x";
        //-----------------
        addName.appendChild(createButton); // J'insère mon bouton que j'ai crée (avec ma var createButton)
        maListe.appendChild(addName);                                   // J'insère ma li dans ma ul
        console.log("mon createButton: ",createButton,
                    "contenu de AddName: "+addName,
                    "Contenu de mon ajout: "+addName.textContent,
                    "Contenu de ma Liste: "+maListe.textContent,
                    "Contenu de mon tableau d'objet users: ",
                    users,
                    "position dans le tableau: "+users.indexOf(objetSaisie),
                    "-----------------");
        document.getElementById("champNom").value = " ";
        document.getElementById("champPrenom").value = " ";
      }


    </script>
</body>
</html>
